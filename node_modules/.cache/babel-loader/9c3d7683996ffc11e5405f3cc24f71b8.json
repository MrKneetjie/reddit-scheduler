{"ast":null,"code":"var _jsxFileName = \"/Users/davidknetemann/Downloads/onlybands 3/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [users, setUsers] = useState([]);\n  const [posts, setPosts] = useState([]);\n  const [showPostForm, setShowPostForm] = useState(false);\n\n  async function getUsers() {\n    await fetch('http://localhost:3030/getUsers').then(response => response.json()).then(users => setUsers(users));\n  }\n\n  async function getPosts() {\n    await fetch('http://localhost:3030/getPosts').then(response => response.json()).then(posts => setPosts(posts));\n  }\n\n  useEffect(() => {\n    getUsers();\n    getPosts();\n  }, []);\n\n  const addAccount = async () => {\n    fetch('http://localhost:3030/authUrl').then(response => response.json()).then(data => window.location.href = data.url);\n  };\n\n  const handleModal = () => {\n    setShowPostForm(!showPostForm);\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const submission = {\n      date: event.target.date.value ? event.target.date.value : 'now',\n      sub: event.target.sub.value,\n      title: event.target.title.value,\n      text: event.target.text.value\n    };\n    fetch('http://localhost:3030/fromAuth', {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify({\n        submission: submission,\n        account: event.target.account.value\n      })\n    }).then(response => response.json()).then(data => {\n      console.log(data);\n      setShowPostForm(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"./\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Onlybands\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 20\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addAccount,\n        children: \"Add Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleModal.bind(),\n        children: \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uD83D\\uDD17 Link\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uD83D\\uDCC5 Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uD83D\\uDCC1 Sub\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uD83D\\uDCD5 Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uD83D\\uDDD2\\uFE0F Text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\uD83D\\uDC40 Posted\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), posts && posts.map(post => {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `https://www.reddit.com/r/${post.sub}/comments/${post.link}`,\n                children: post.link\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: new Intl.DateTimeFormat(\"en-GB\", {\n                month: \"2-digit\",\n                day: \"2-digit\",\n                hour: \"2-digit\",\n                minute: \"2-digit\",\n                hour12: true\n              }).format(new Date(post.date))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: post.sub\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: post.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: post.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: post.posted ? \"âœ…\" : \"âŒ\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this)]\n          }, post._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 20\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), showPostForm && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      id: \"postForm\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Create Post!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleModal.bind(),\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"textarea\",\n          name: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Subreddit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"sub\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"datetime-local\",\n          name: \"date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"account\",\n          id: \"account\",\n          children: users && users.map(user => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              value: user.username,\n              children: user.username\n            }, user.refreshToken, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 22\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"POST\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 24\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"V4qUeZL0Rujso1vAe8nVbh+13Yk=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/davidknetemann/Downloads/onlybands 3/src/App.js"],"names":["useEffect","useState","App","users","setUsers","posts","setPosts","showPostForm","setShowPostForm","getUsers","fetch","then","response","json","getPosts","addAccount","data","window","location","href","url","handleModal","handleSubmit","event","preventDefault","submission","date","target","value","sub","title","text","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","account","console","log","bind","map","post","link","Intl","DateTimeFormat","month","day","hour","minute","hour12","format","Date","posted","_id","user","username","refreshToken"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport './App.css';\n\nconst App = () => {\n  const [users, setUsers] = useState([]);\n  const [posts, setPosts] = useState([]);\n  const [showPostForm, setShowPostForm] = useState(false);\n\n  async function getUsers() {\n    await fetch('http://localhost:3030/getUsers')\n    .then(response => response.json())\n    .then(users => setUsers(users));\n  }\n\n  async function getPosts() {\n    await fetch('http://localhost:3030/getPosts')\n    .then(response => response.json())\n    .then(posts => setPosts(posts));\n  }\n\n  useEffect(() => {\n    getUsers();\n    getPosts();\n  }, [])\n  \n  const addAccount = async () => {\n    fetch('http://localhost:3030/authUrl')\n      .then(response => response.json())\n      .then(data => window.location.href = data.url);\n  }\n\n  const handleModal = () => {\n    setShowPostForm(!showPostForm);\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    const submission = {\n      date: event.target.date.value ? event.target.date.value : 'now',\n      sub: event.target.sub.value,\n      title: event.target.title.value,\n      text: event.target.text.value,\n    }\n\n    fetch('http://localhost:3030/fromAuth', {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify({\n          submission: submission,\n          account: event.target.account.value,\n        })\n    })\n    .then(response => response.json())\n    .then(data => {\n      console.log(data);\n      setShowPostForm(false);\n    });\n  }\n  \n  return (\n    <div className=\"App\">\n      <a href=\"./\"><h1>Onlybands</h1></a>\n      <div className=\"buttons\">\n        <button onClick={addAccount}>Add Account</button>\n        <button onClick={handleModal.bind()}>Post</button>\n      </div>\n\n      <table>\n        <tbody>\n          <tr>\n            <th>ğŸ”— Link</th>\n            <th>ğŸ“… Date</th>\n            <th>ğŸ“ Sub</th>\n            <th>ğŸ“• Title</th>\n            <th>ğŸ—’ï¸ Text</th>\n            <th>ğŸ‘€ Posted</th>\n          </tr>\n          {posts && posts.map(post => {\n            return <tr key={post._id}>\n              <td><a href={`https://www.reddit.com/r/${post.sub}/comments/${post.link}`}>{post.link}</a></td>\n              <td>{new Intl.DateTimeFormat(\"en-GB\", {\n                  month: \"2-digit\",\n                  day: \"2-digit\",\n                  hour: \"2-digit\",\n                  minute: \"2-digit\",\n                  hour12: true,\n                }).format(new Date(post.date))}</td>\n              <td>{post.sub}</td>\n              <td>{post.title}</td>\n              <td>{post.text}</td>\n              <td>{post.posted ? \"âœ…\" : \"âŒ\"}</td>\n            </tr>;\n          })}\n        </tbody>\n      </table>\n\n      {showPostForm && <form onSubmit={handleSubmit} id=\"postForm\">\n        <h4>Create Post!</h4>\n        <button onClick={handleModal.bind()}>X</button>\n        <div className=\"input-group\">\n          <label>Title</label>\n          <input type=\"text\" name=\"title\"></input>\n        </div>\n\n        <div className=\"input-group\">\n          <label>Description</label>\n          <input type=\"textarea\" name=\"text\"></input>\n        </div>\n\n        <div className=\"input-group\">\n          <label>Subreddit</label>\n          <input type=\"text\" name=\"sub\"></input>\n        </div>\n\n        <div className=\"input-group\">\n          <label>Date</label>\n          <input type=\"datetime-local\" name=\"date\"></input>\n        </div>\n\n        <div className=\"input-group\">\n          <label>Account</label>\n          <select name=\"account\" id=\"account\">\n            {users && users.map(user => {\n              return <option value={user.username} key={user.refreshToken}>{user.username}</option>;\n            })}\n          </select>\n        </div>\n\n        <button>POST</button>\n      </form>}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}